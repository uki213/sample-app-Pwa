{"version":3,"sources":["webpack:///./src/components/pages/Index/Camera.vue?13da","webpack:///src/components/pages/Index/Camera.vue","webpack:///./src/components/pages/Index/Camera.vue?94f6","webpack:///./src/components/pages/Index/Camera.vue","webpack:///./src/components/pages/Index/Camera.vue?ac69"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$emit","resultImage","staticRenderFns","setup","x","y","handleSuccess","stream","playerElement","srcObject","onloadedmetadata","play","pause","virtualCanvas","width","canvasSize","height","context","drawImage","imageData","document","getElementById","navigator","mediaDevices","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,QAAQ,CAACE,YAAY,UAAUC,MAAM,CAAC,GAAK,UAAU,SAAW,GAAG,SAAW,MAAMH,EAAG,MAAM,CAACA,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,0BAA0BC,GAAG,CAAC,MAAQ,SAASC,GAAQT,EAAIU,MAAM,QAASV,EAAIW,wBAChTC,EAAkB,G,YC0BtB,kBACEC,MADF,WAEI,IAIJ,EAJA,GACMC,EAAG,KACHC,EAAG,MAIL,SAASC,EAAcC,GACrBC,EAAcC,UAAYF,EAC1BC,EAAcE,iBAAmB,WAC/BF,EAAcG,QAkBlB,SAASV,IACPO,EAAcI,QACd,IAAN,mCACMC,EAAcC,MAAQC,EAAWX,EACjCS,EAAcG,OAASD,EAAWV,EAClC,IAAN,qBACMY,EAAQC,UACd,EACA,EACA,EACA,QACA,UAEM,IAAN,gCACM,OAAOC,EAET,OA9BA,OAAJ,OAAI,EAAJ,WACMX,EAAgBY,SAASC,eAAe,WACxCC,UAAUC,aAChB,cACQ,MAAR,CACU,UAAV,GACU,WAAV,CAAY,MAAZ,eACU,MAAV,CAAY,IAAZ,IAAY,MAAZ,IAAY,IAAZ,MACU,OAAV,CAAY,IAAZ,IAAY,MAAZ,IAAY,IAAZ,SAGA,WAmBW,CACLtB,YAAN,MCzE8W,I,wBCQ1WuB,EAAY,eACd,EACAnC,EACAa,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E,kECnBf,yBAA6kB,EAAG","file":"js/chunk-780e0284.55393527.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('video',{staticClass:\"preview\",attrs:{\"id\":\"preview\",\"controls\":\"\",\"autoplay\":\"\"}}),_c('div',[_c('img',{attrs:{\"src\":\"img/ui/shutterMark.svg\"},on:{\"click\":function($event){_vm.$emit('click', _vm.resultImage())}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n カメラの操作はjsフレームワークでも直接browserの機能を呼ぶ必要がある。\n このコンポーネントでは、mediaDevicesを用いてカメラのプレビュー及び、\n キャプチャショットを取得し、emitでそのキャプチャショットを返却することで、\n vue.jsのエコシステムに乗せている。\n-->\n\n<template>\n  <section>\n    <video\n      id=\"preview\"\n      class=\"preview\"\n      controls\n      autoplay\n    />\n    <div>\n      <img\n        src=\"img/ui/shutterMark.svg\"\n        @click=\"$emit('click', resultImage())\"\n      >\n    </div>\n  </section>\n</template>\n\n<script>\nimport { defineComponent, onMounted } from '@vue/composition-api'\n\nexport default defineComponent({\n  setup() {\n    const canvasSize = {\n      x: 1080,\n      y: 1080\n    }\n    let playerElement\n\n    function handleSuccess(stream) {\n      playerElement.srcObject = stream\n      playerElement.onloadedmetadata = () => {\n        playerElement.play()\n      }\n    }\n\n    onMounted(() => {\n      playerElement = document.getElementById('preview')\n      navigator.mediaDevices\n        .getUserMedia({\n          video: {\n            frameRate: 15,\n            facingMode: { exact: 'environment' },\n            width: { min: 776, ideal: 720, max: 1080 },\n            height: { min: 776, ideal: 720, max: 1080 }\n          }\n        })\n        .then(handleSuccess)\n    })\n\n    function resultImage() {\n      playerElement.pause()\n      const virtualCanvas = document.createElement('canvas')\n      virtualCanvas.width = canvasSize.x\n      virtualCanvas.height = canvasSize.y\n      const context = virtualCanvas.getContext('2d')\n      context.drawImage(\n        playerElement,\n        0,\n        0,\n        virtualCanvas.width,\n        virtualCanvas.height\n      )\n      const imageData = virtualCanvas.toDataURL('image/jpeg', 0.95)\n      return imageData\n    }\n    return {\n      resultImage\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\nsection {\n  padding-top: 44px;\n  text-align: center;\n  .preview {\n    width: 320px;\n    height: 320px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Camera.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Camera.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Camera.vue?vue&type=template&id=5391d9ae&scoped=true&\"\nimport script from \"./Camera.vue?vue&type=script&lang=js&\"\nexport * from \"./Camera.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Camera.vue?vue&type=style&index=0&id=5391d9ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5391d9ae\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Camera.vue?vue&type=style&index=0&id=5391d9ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Camera.vue?vue&type=style&index=0&id=5391d9ae&lang=scss&scoped=true&\""],"sourceRoot":""}